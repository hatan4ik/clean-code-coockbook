<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800" viewBox="0 0 1200 800">
  <defs>
    <linearGradient id="bg" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#0b1d2f"/>
      <stop offset="100%" stop-color="#0f2d3f"/>
    </linearGradient>
    <marker id="arrow" viewBox="0 0 10 10" refX="6" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse" fill="#0b1d2f">
      <path d="M 0 0 L 10 5 L 0 10 z"/>
    </marker>
    <style>
      .label { font: 700 22px "Fira Sans", "Helvetica Neue", Arial, sans-serif; fill: #0b1d2f; }
      .caption { font: 400 16px "Fira Sans", "Helvetica Neue", Arial, sans-serif; fill: #0b1d2f; }
      .subtitle { font: 600 18px "Fira Sans", "Helvetica Neue", Arial, sans-serif; fill: #0b1d2f; text-transform: uppercase; letter-spacing: 1px; }
      .note { font: 500 16px "Fira Sans", "Helvetica Neue", Arial, sans-serif; fill: #d9e8ff; }
      .hint { font: 400 15px "Fira Sans", "Helvetica Neue", Arial, sans-serif; fill: #d9e8ff; }
      .layer { stroke-width: 3; rx: 14; }
    </style>
  </defs>
  <rect x="0" y="0" width="1200" height="800" fill="url(#bg)" />

  <!-- Layer containers -->
  <rect class="layer" x="70" y="70" width="1060" height="660" fill="#d9e8ff" stroke="#0d6efd" opacity="0.9" />
  <rect class="layer" x="130" y="130" width="940" height="540" fill="#ffe7c2" stroke="#d17b00" opacity="0.92" />
  <rect class="layer" x="190" y="190" width="820" height="420" fill="#d7f0e3" stroke="#2f8f5b" opacity="0.94" />
  <rect class="layer" x="360" y="280" width="480" height="240" fill="#f7fbff" stroke="#0c4a6e" opacity="0.97" />

  <!-- Layer titles -->
  <text class="subtitle" x="100" y="110">Entrypoints / Interfaces</text>
  <text class="subtitle" x="160" y="170">Adapters / Infrastructure</text>
  <text class="subtitle" x="220" y="230">Service Layer / Application</text>
  <text class="subtitle" x="390" y="315">Domain / Core</text>

  <!-- Entrypoints detail -->
  <text class="label" x="160" y="220">FastAPI, gRPC, GraphQL, Event Consumers</text>
  <text class="caption" x="160" y="250">- Handles HTTP/JSON status codes and request parsing</text>
  <text class="caption" x="160" y="276">- Wires dependencies (DI) and delegates into use cases</text>

  <!-- Adapters detail -->
  <text class="label" x="220" y="300">Adapters implement Ports</text>
  <text class="caption" x="220" y="326">- SQLAlchemy, AsyncPG, Redis, S3, external APIs</text>
  <text class="caption" x="220" y="352">- Translate protocol calls into concrete I/O</text>

  <!-- Service layer detail -->
  <text class="label" x="280" y="380">Use Cases + Unit of Work</text>
  <text class="caption" x="280" y="406">- Orchestrates domain logic and enforces transactions</text>
  <text class="caption" x="280" y="432">- Contains validators, policies, saga choreography</text>

  <!-- Domain detail -->
  <text class="label" x="410" y="355">Entities, Value Objects, Domain Events</text>
  <text class="caption" x="410" y="381">- Pure business rules, no framework imports</text>
  <text class="caption" x="410" y="407">- Ports (Protocols) express required capabilities</text>
  <text class="caption" x="410" y="433">- Immutable inputs, deterministic outputs</text>

  <!-- Ports and adapters link -->
  <rect x="430" y="450" width="140" height="40" rx="10" fill="#0c4a6e" opacity="0.9"/>
  <text class="caption" x="450" y="476" fill="#f7fbff">Ports (Protocols)</text>

  <rect x="630" y="450" width="160" height="40" rx="10" fill="#d17b00" opacity="0.9"/>
  <text class="caption" x="646" y="476" fill="#fdf7ed">Adapters (Implementations)</text>

  <line x1="570" y1="470" x2="630" y2="470" stroke="#0b1d2f" stroke-width="3" marker-end="url(#arrow)"/>

  <!-- Dependency rule -->
  <line x1="1040" y1="700" x2="160" y2="700" stroke="#d9e8ff" stroke-width="2" marker-end="url(#arrow)" marker-start="url(#arrow)"/>
  <text class="note" x="240" y="725">Dependency Rule: outer layers point inward only; inner core is stable.</text>

  <!-- Async emphasis -->
  <rect x="820" y="120" width="260" height="90" rx="12" fill="#0c4a6e" opacity="0.9" />
  <text class="note" x="840" y="155">Async Everywhere</text>
  <text class="hint" x="840" y="182">I/O awaits in Adapters, UoW commits atomically,</text>
  <text class="hint" x="840" y="205">Domain stays synchronous &amp; pure.</text>
</svg>
